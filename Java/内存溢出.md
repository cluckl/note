[TOC]



# 概述

内存溢出：申请的内存空间大小小于写入的数据大小，出现溢出,即`OutOfMemoryError`。

可能原因：

* 内存中加载的数据量过于庞大，如一次从数据库取出过多数据。
* **内存泄露**：集合类中有对对象的引用，使用完后未清空，使得JVM不能回收。
* 代码中存在死循环或循环产生过多重复的对象实体。
* 使用的第三方软件中的BUG。
* 启动参数内存值设定的过小。

# 解决方法


## 堆内存溢出
设置的jvm内存太小，对象所需内存太大，抛出`java.lang.OutOfMemoryError:Java heap space`[异常](异常.md)。

解决方法：
* 增加[JVM内存](JVM内存分配.md)分配大小。
* 优化程序：根本上解决Java内存溢出的唯一方法就是修改程序，及时地释放没用的对象，释放内存空间。
## 内存泄漏
[Java堆](JVM内存空间#Java堆)中存在对象没有被引用（如使用没有重写`equals`方法的自定义类），但无法被[回收](JVM垃圾回收#垃圾回收)，当这些对象越来越多时最终将导致`java . lang.OutOfMemoryError`。

解决方法：重写`equals`方法。
## 垃圾回收超时内存溢出
JVM花费大量的时间执行GC，而收效甚微，而一旦整个GC的过程超过限制便会引发`java.lang.OutOfMemoryError`。
解决方法：减少对象生命周期，尽量能快速的进行垃圾回收。
## Metaspace内存溢出
系统的代码非常多或引用的第三方包非常多或者通过动态代码生成类加载等方法，导致元空间的内存占用很大，抛出`java.lang.OutOfMemoryError: Metaspace`。
## 栈内存溢出
线程执行的方法过多，一般是多次递归调用，会造成[虚拟机栈](JVM内存空间#虚拟机栈)的内存溢出。
解决方法：
* 调高-Xss大小
* 递归调用防止形成死循环
# 参考
* [十种JVM内存溢出的情况，你碰到过几种？ - SegmentFault 思否 ](https://segmentfault.com/a/1190000017226359)