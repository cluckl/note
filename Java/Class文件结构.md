[TOC]

Class文件结构按结构顺序如下
## 魔数
Class 文件的头 4 个字节称为魔数，用来表示这个 Class 文件的类型，它的唯一作用是**确定这个文件是否为一个能被虚拟机接收的 Class 文件**。
## 版本信息
表示当前 Class 文件中使用的 **JDK 版本信息**。紧接着魔数的 4 个字节是版本信息，5-6 字节表示次版本号，7-8 字节表示主版本号。
> 高版本的 JDK 能向下兼容以前版本的 Class 文件，但不能运行以后版本的 Class 文件，即使文件格式并未发生任何变化，虚拟机也必需拒绝执行超过其版本号的 Class 文件。
## 常量池
常量数量不固定，包含的类型有两种：
* **字面值常量**：字符串、final修饰的值
* **符号引用**： 定义的各种名字：类和接口的全限定名、字段的名字和描述符、方法的名字和描述符。
## 访问标志
在常量池结束之后，紧接着的两个字节代表访问标志，这个标志用于识别一些类或者接口层次的访问信息，包括：
* Class是类或是接口
* 访问范围
* 是否被`abstract`或`final`修饰
## 索引
Class文件的索引包括三种索引：
1. 类索引：用于确定这个类的全限定名
2. 父类索引：确定这个类的父类的全限定名
>除了 java.lang.Object 外，所有 Java 类的父类索引都不为 0。

3. 接口索引集合：第一项表示容量，后面的项表示接口的名字索引。
## 字段表集合
字段表集合存储本类涉及到的成员变量，包括实例变量和类变量。
每一个字段表只表示一个成员变量，本类中的所有成员变量构成了字段表集合。字段表结构如下：

| 类型 | 名称 | 数量  | 说明   |
| ---- | ---------------- | ---------- | -------- |
| u2  | access_flags | 1 | 字段的访问标志，与类稍有不同 |
| u2 | name_index  | 1 | 字段名字的索引  |
| u2 | descriptor_index | 1   | 描述符，用于描述字段的数据类型。|
| u2| attributes_count | 1 | 属性表集合的长度|
| u2 | attributes | attributes_count | 属性表集合，用于存放属性的额外信息，如属性的值。   |
>字段表集合中不会出现从父类（或接口）中继承而来的字段，但有可能出现原本 Java 代码中不存在的字段，譬如在内部类中为了保持对外部类的访问性，会自动添加指向外部类实例的字段。
## 方法表集合
方法表结构与[属性表](Class文件结构#属性表集合)类似。

## 属性表集合
每个属性对应一张属性表，属性表的结构如下：

| 类型 | 名称                 | 数量             |
| ---- | -------------------- | ---------------- |
| u2   | attribute_name_index | 1                |
| u4   | attribute_length     | 1                |
| u1   | info                 | attribute_length |
