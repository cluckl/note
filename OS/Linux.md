# 文件管理

## inode

inode由两部分组成：

1. 元数据，包括文件类型、文件大小、链接数、文件权限、拥有用户/组以及时间（创建、修改、访问时间）等数据。
2. 文件数据的位置，即文件内容所在的 block 编号

> inode不包含文件名，文件名由目录保存。

## 目录

目录：内容为**<u>一组目录项</u>**的特殊文件，目录项由**<u>文件名</u>**+对应文件的inode号组成。

>  “.”表示当前目录， “..”表示父目录

## 链接

### 硬链接

硬链接：创建硬链接增加了一个指向源文件inode的目录项，不是一种文件。

不支持硬链接目录的原因：可能会打破文件系统目录的**<u>有向无环图</u>**结构，创建目录循环，进而导致一些遍历文件树的软件出错。

### 软连接

软连接（符号链接）：内容为一个路径的特殊文件，查找文件时会“跳”到目标路径。

### 链接命令

```sh
ln [-sf] source_filename dist_filename
-s ：默认是实体链接，加 -s 为符号链接
-f ：如果目标文件存在时，先删除目标文件
```

## 相关命令

### 打开文件

```sh
cat  [FILE]             # Concatenate FILE(s) to standard output.
tac  [FILE]             # cat 的反向操作，从最后一行开始打印文件内容
more [FILE]             # 以页为单位查看文件内容，适合打开大文件
less [FILE]             # 和 more 类似，但是多了向前翻页等高级功能
head [FILE] -n num      # 打印文件的前num行
tail [FILE] -n num      # 打印文件的后num行
od                      # 以字符或者十六进制的形式显示二进制文件
```

# 进程管理

##  SIGCHLD

SIGCHLD信号：当进程的状态发生改变，会将该信号发送给父进程。信号处理函数默认的处理方式为忽略(ignore)，但可以使用`wait`系统调用来响应子进程。

## 孤儿进程

孤儿进程：父进程退出，当自身仍然在运行的进程。

* 去向：孤儿进程会被`init`进程（进程ID号为1）收养并`wait`其退出。

## 僵尸进程

僵尸进程：进程完成执行，但进程表仍然存在其进程控制块(PCB)，等待父进程调用`wait`处理。

* 原因：父进程没有调用`wait`。

* 后果：僵尸进程会占用进程号，从而可能导致出现资源泄漏。

* 解决方式：终止父进程，使僵尸进程成为孤儿进程，从而被`init`进程收养。

## 相关命令

### ps

**ps(process status)**：显示当前运行的进程。

```sh
ps -l     # 指定“长”（long）输出格式
ps aux    # 辅助非标准选项aux，其中“a”列出了一个终端上的所有进程，包括其他用户运行的，“x”列出所有没有控制终端的进程，“u”添加了一列显示每个进程的控制用户。
ps aux | grep threadx    # 查看特定的进程
```

### pstree

pstree：显示当前运行的进程的**<u>进程树</u>**。

### top

**top(t**able **o**f **p**rocesses)**：<u>实时显示</u>**当前运行进程的有关信息，如PID，CPU利用率等等。

### netstat

**netstat** (**network statistics**)：显示有关**<u>网络连接</u>**的信息，如正在使用的端口，使用它们的进程。