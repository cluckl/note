# 数据库基础

[TOC]

## 数据模型
* 概念模型
* 逻辑模型和物理模型

### 数据模型的组成要素
（1）数据结构:数据库结构是对象类型的集合。（静态特征）
（2）数据操作:对数据库中各种对象(型)的实例(值)允许执行的操作及有关的操作规则。（动态特征）
（3）数据的完整性约束:
> 一组完整性规则的集合。
完整性规则：给定的数据模型中数据及其联系所具有的制约和储存 规则
用以限定符合数据模型的数据库状态以及状态的变化，以保证数据 的正确、有效、相容。

## 数据库系统的结构
### 外部结构-体系结构
### 数据库系统的内部结构-模式结构
三级模式、二级映象
![](../pic/Pasted%20image%2020201108212644.png)
外模式/模式映像→数据的逻辑独立性
模式/内模式映像→数据的物理独立性

## 数据结构及形式化定义

### 关系模型的相关定义

* 域（Domain）    
* 笛卡尔积（Cartesian Product）
  * 元祖	
  * 分量
  * 基数  
* 关系（Relation）：笛卡尔积的子集
  * 候选码（Candidate key）
  * 主码（Primary key）
  * 全码（All-key）
  * 主属性、非主属性

三类关系：基本表、查询表和视图表

### 关系模型

关系模式是对关系的描述（关系模式是型，关系是值）。包括：

* 元组集合的结构
* 元组语义和==完整性约束条件==
* 属性间的==数据依赖==关系集合

### 关系模式与关系

关系模式（型）

* 对关系的描述，静态的、稳定的。

关系（值）

* 关系模式在某一时刻的状态或内容；
* 动态的、随时间不断变化的。

### 关系模型的完整性约束

* 实体完整性
* 参照完整性
* 用户定义的完整性

### 关系模型的数据操作

#### 传统的集合运算

并运算（∪）、 交运算（ ∩ ）、 差运算（-）、 广义笛卡尔积（×）

#### 专门的关系运算

* 象集（Images Set）
* 选择（σ）: 选择满足给定条件的元组
* 投影(π): 选择出若干属性列组成新的关系
* 连接:
  * 等值连接
  * 自然连接
  * 外连接
* 除运算

## ==视图==

视图是虚表

### 优点

* **简化查询操作**
* 隐藏表的部分数据，提高**安全性**
* 提供一定的**逻辑独立性**
* 使用户以**多种角度**看待同一数据

### 缺点

* 由于对视图的查询会转化成对基本表的查询，所以即使是对视图的一个简单查询，数据库也会把它变成一个复制的结合体，降低了性能。
* 无法修改一些复杂的视图。

> 这些视图有如下特征：
>
> 1. 有UNIQUE等集合操作符的视图。
> 2. 有GROUP BY子句的视图。
> 3. 有诸如AVG\SUM\MAX等聚合函数的视图。 
>  4. 使用DISTINCT关键字的视图。
> 5. 连接表的视图（其中有些例外）

## ==范式==

只有满足[3NF](%E8%8C%83%E5%BC%8F.md#3NF)才能消除数据冗余、更新异常、插入异常和删除异常。 
<u>注意：并不是范式越高越好，一般满足[3NF](%E8%8C%83%E5%BC%8F.md#3NF)即可。</u>

### 1NF

数据库表的每一列都是不可分割的基本数据项，即要求属性具有**原子性**。

### 2NF

在[1NF](%E8%8C%83%E5%BC%8F.md#1NF)的基础上，非主属性完全依赖于主键。

### 3NF

在[2NF](%E8%8C%83%E5%BC%8F.md#2NF)的基础上，任何非主属性不依赖于其它非主属性。

### BCNF

在[3NF](%E8%8C%83%E5%BC%8F.md#3NF)的基础上，任何**主属性**不部分依赖或传递依赖于非主键。

### 4NF

在[BCNF](%E8%8C%83%E5%BC%8F.md#BCNF)的基础上，消除表中的**非平凡且函数依赖的多值依赖**。

第二范式与第三范式的本质区别：在于有没有分出两张表：
第二范式是说一张表中包含了多种不同实体的属性，那么必须要分成多张表，第三范式是要求已经分好了多张表的话，一张表中只能有另一张标的ID，而不能有其他任何信息，（其他任何信息，一律用主键在另一张表中查询）








